# Phase 6 è®¡åˆ’ - æ•°æ®å¢å¼º

## ğŸ“‹ æ¦‚è¿°

**ç‰ˆæœ¬**ï¼šv1.1  
**ç›®æ ‡**ï¼šå¢å¼ºæ•°æ®ç®¡ç†èƒ½åŠ›ï¼Œæä¾›æ›´çµæ´»çš„æ•°æ®æ“ä½œ  
**é¢„è®¡æ—¶é—´**ï¼š2-3 å‘¨  
**ä¼˜å…ˆçº§**ï¼šP1ï¼ˆé‡è¦åŠŸèƒ½ï¼‰

---

## ğŸ¯ ç›®æ ‡

1. å®ç°æ•°æ®å¯¼å…¥å¯¼å‡ºåŠŸèƒ½ï¼ˆJSON/CSVï¼‰
2. æ·»åŠ äº‹ä»¶æœç´¢åŠŸèƒ½
3. å®ç°äº‹ä»¶åˆ†ç±»/æ ‡ç­¾ç³»ç»Ÿ
4. æä¾›æ•°æ®å¤‡ä»½å’Œæ¢å¤åŠŸèƒ½

---

## ğŸ“¦ åŠŸèƒ½è¯¦ç»†è®¾è®¡

### 6.1 æ•°æ®å¯¼å…¥å¯¼å‡º

#### 6.1.1 å¯¼å‡ºåŠŸèƒ½

**JSON å¯¼å‡º**
```dart
// æ•°æ®ç»“æ„
{
  "version": "1.0",
  "exportDate": "2026-02-28T10:00:00Z",
  "events": [
    {
      "id": "uuid",
      "title": "äº‹ä»¶æ ‡é¢˜",
      "description": "äº‹ä»¶æè¿°",
      "date": "2026-02-28",
      "startTime": "10:00",
      "endTime": "11:00",
      "category": "å·¥ä½œ",
      "tags": ["é‡è¦", "ä¼šè®®"]
    }
  ],
  "intentions": [
    {
      "id": "uuid",
      "date": "2026-02-28",
      "content": "ä»Šæ—¥æ„å›¾",
      "isCompleted": true
    }
  ]
}
```

**CSV å¯¼å‡º**
```csv
ç±»å‹,ID,æ—¥æœŸ,æ ‡é¢˜,æè¿°,å¼€å§‹æ—¶é—´,ç»“æŸæ—¶é—´,åˆ†ç±»,æ ‡ç­¾,å®ŒæˆçŠ¶æ€
äº‹ä»¶,uuid,2026-02-28,äº‹ä»¶æ ‡é¢˜,äº‹ä»¶æè¿°,10:00,11:00,å·¥ä½œ,"é‡è¦,ä¼šè®®",
æ„å›¾,uuid,2026-02-28,ä»Šæ—¥æ„å›¾,,,,,true
```

#### 6.1.2 å¯¼å…¥åŠŸèƒ½

**å¯¼å…¥æµç¨‹**
1. æ–‡ä»¶é€‰æ‹©å™¨ï¼ˆfile_picker åŒ…ï¼‰
2. æ–‡ä»¶æ ¼å¼éªŒè¯
3. æ•°æ®è§£æå’ŒéªŒè¯
4. å†²çªæ£€æµ‹ï¼ˆID é‡å¤ï¼‰
5. å¯¼å…¥ç¡®è®¤å¯¹è¯æ¡†
6. æ•°æ®åˆå¹¶æˆ–æ›¿æ¢
7. å¯¼å…¥ç»“æœåé¦ˆ

**é”™è¯¯å¤„ç†**
- æ–‡ä»¶æ ¼å¼é”™è¯¯
- æ•°æ®æ ¼å¼ä¸åŒ¹é…
- å¿…å¡«å­—æ®µç¼ºå¤±
- æ—¥æœŸæ ¼å¼é”™è¯¯
- ID å†²çªå¤„ç†

#### 6.1.3 UI è®¾è®¡

**Settings é¡µé¢æ–°å¢**
```
æ•°æ®ç®¡ç†
â”œâ”€ å¯¼å‡ºæ•°æ®
â”‚  â”œâ”€ å¯¼å‡ºä¸º JSON
â”‚  â””â”€ å¯¼å‡ºä¸º CSV
â”œâ”€ å¯¼å…¥æ•°æ®
â”‚  â”œâ”€ ä» JSON å¯¼å…¥
â”‚  â””â”€ ä» CSV å¯¼å…¥
â””â”€ æ•°æ®ç»Ÿè®¡
   â”œâ”€ äº‹ä»¶æ€»æ•°ï¼šX
   â””â”€ æ„å›¾æ€»æ•°ï¼šY
```

---

### 6.2 äº‹ä»¶æœç´¢åŠŸèƒ½

#### 6.2.1 æœç´¢åŠŸèƒ½

**æœç´¢èŒƒå›´**
- äº‹ä»¶æ ‡é¢˜
- äº‹ä»¶æè¿°
- äº‹ä»¶åˆ†ç±»
- äº‹ä»¶æ ‡ç­¾

**æœç´¢é€‰é¡¹**
- å…¨æ–‡æœç´¢
- æ—¥æœŸèŒƒå›´ç­›é€‰
- åˆ†ç±»ç­›é€‰
- æ ‡ç­¾ç­›é€‰

#### 6.2.2 UI è®¾è®¡

**Calendar é¡µé¢æ–°å¢æœç´¢æ **
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ” æœç´¢äº‹ä»¶...        [ç­›é€‰] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æœç´¢ç»“æœé¡µé¢**
```
æœç´¢ç»“æœ (3)
â”œâ”€ 2026-02-28 - å›¢é˜Ÿä¼šè®®
â”‚  å·¥ä½œ | 10:00-11:00
â”œâ”€ 2026-03-01 - é¡¹ç›®è¯„å®¡
â”‚  å·¥ä½œ | 14:00-15:00
â””â”€ 2026-03-05 - å‘¨ä¼š
   å·¥ä½œ | 09:00-10:00
```

#### 6.2.3 æœç´¢å†å²

- ä¿å­˜æœ€è¿‘ 10 æ¡æœç´¢è®°å½•
- å¿«é€Ÿé‡å¤æœç´¢
- æ¸…é™¤æœç´¢å†å²

---

### 6.3 äº‹ä»¶åˆ†ç±»ç³»ç»Ÿ

#### 6.3.1 åˆ†ç±»æ¨¡å‹

```dart
class EventCategory {
  final String id;
  final String name;
  final Color color;
  final IconData icon;
  final bool isDefault;
  
  EventCategory({
    required this.id,
    required this.name,
    required this.color,
    required this.icon,
    this.isDefault = false,
  });
}
```

#### 6.3.2 é¢„å®šä¹‰åˆ†ç±»

| åˆ†ç±» | é¢œè‰² | å›¾æ ‡ |
|------|------|------|
| å·¥ä½œ | è“è‰² | work |
| ç”Ÿæ´» | ç»¿è‰² | home |
| å­¦ä¹  | ç´«è‰² | school |
| å¥åº· | çº¢è‰² | favorite |
| ç¤¾äº¤ | æ©™è‰² | people |
| å¨±ä¹ | ç²‰è‰² | celebration |
| å…¶ä»– | ç°è‰² | more_horiz |

#### 6.3.3 è‡ªå®šä¹‰åˆ†ç±»

**åˆ†ç±»ç®¡ç†é¡µé¢**
```
åˆ†ç±»ç®¡ç†
â”œâ”€ é¢„å®šä¹‰åˆ†ç±» (7)
â”‚  â”œâ”€ å·¥ä½œ ğŸ”µ
â”‚  â”œâ”€ ç”Ÿæ´» ğŸŸ¢
â”‚  â””â”€ ...
â””â”€ è‡ªå®šä¹‰åˆ†ç±» (2)
   â”œâ”€ å¥èº« ğŸ”´
   â””â”€ é˜…è¯» ğŸŸ£
   
[+ æ·»åŠ åˆ†ç±»]
```

**æ·»åŠ åˆ†ç±»å¯¹è¯æ¡†**
- åˆ†ç±»åç§°è¾“å…¥
- é¢œè‰²é€‰æ‹©å™¨ï¼ˆ12 ç§é¢„è®¾é¢œè‰²ï¼‰
- å›¾æ ‡é€‰æ‹©å™¨ï¼ˆ20+ å›¾æ ‡ï¼‰
- ä¿å­˜/å–æ¶ˆæŒ‰é’®

#### 6.3.4 åˆ†ç±»ç­›é€‰

**Calendar é¡µé¢ç­›é€‰å™¨**
```
ç­›é€‰
â˜‘ å·¥ä½œ (5)
â˜‘ ç”Ÿæ´» (3)
â˜ å­¦ä¹  (0)
â˜‘ å¥åº· (2)
```

#### 6.3.5 åˆ†ç±»ç»Ÿè®¡

**Statistics é¡µé¢ï¼ˆæ–°å¢ï¼‰**
```
æœ¬æœˆç»Ÿè®¡
â”œâ”€ å·¥ä½œï¼š15 ä¸ªäº‹ä»¶ (45%)
â”œâ”€ ç”Ÿæ´»ï¼š10 ä¸ªäº‹ä»¶ (30%)
â”œâ”€ å¥åº·ï¼š5 ä¸ªäº‹ä»¶ (15%)
â””â”€ å…¶ä»–ï¼š3 ä¸ªäº‹ä»¶ (10%)

[é¥¼å›¾å±•ç¤º]
```

---

### 6.4 æ•°æ®å¤‡ä»½

#### 6.4.1 è‡ªåŠ¨å¤‡ä»½

**å¤‡ä»½ç­–ç•¥**
- æ¯æ—¥è‡ªåŠ¨å¤‡ä»½ï¼ˆå¯é…ç½®ï¼‰
- ä¿ç•™æœ€è¿‘ 7 å¤©å¤‡ä»½
- å¤‡ä»½æ–‡ä»¶å‘½åï¼š`ZenCalendar_backup_YYYYMMDD_HHmmss.json`

**å¤‡ä»½ä½ç½®**
- Android: `/storage/emulated/0/ZenCalendar/backups/`
- iOS: `Documents/ZenCalendar/backups/`
- Windows: `%USERPROFILE%\Documents\ZenCalendar\backups\`

#### 6.4.2 æ‰‹åŠ¨å¤‡ä»½

**Settings é¡µé¢æ–°å¢**
```
æ•°æ®å¤‡ä»½
â”œâ”€ è‡ªåŠ¨å¤‡ä»½ï¼šå¼€å¯ âœ“
â”œâ”€ å¤‡ä»½é¢‘ç‡ï¼šæ¯æ—¥
â”œâ”€ ä¿ç•™å¤©æ•°ï¼š7 å¤©
â”œâ”€ ç«‹å³å¤‡ä»½
â””â”€ å¤‡ä»½ç®¡ç†
   â”œâ”€ 2026-02-28 10:00 (2.3 MB)
   â”œâ”€ 2026-02-27 10:00 (2.1 MB)
   â””â”€ ...
```

#### 6.4.3 æ¢å¤åŠŸèƒ½

**æ¢å¤æµç¨‹**
1. é€‰æ‹©å¤‡ä»½æ–‡ä»¶
2. é¢„è§ˆå¤‡ä»½å†…å®¹ï¼ˆäº‹ä»¶æ•°/æ„å›¾æ•°ï¼‰
3. é€‰æ‹©æ¢å¤æ–¹å¼ï¼ˆåˆå¹¶/æ›¿æ¢ï¼‰
4. ç¡®è®¤æ¢å¤
5. æ¢å¤è¿›åº¦æ˜¾ç¤º
6. æ¢å¤å®Œæˆåé¦ˆ

---

## ğŸ“ æ–‡ä»¶ç»“æ„

```
lib/app/
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ event_category.dart          # æ–°å¢ï¼šåˆ†ç±»æ¨¡å‹
â”‚   â”‚   â””â”€â”€ backup_info.dart             # æ–°å¢ï¼šå¤‡ä»½ä¿¡æ¯æ¨¡å‹
â”‚   â”œâ”€â”€ repositories/
â”‚   â”‚   â”œâ”€â”€ category_repository.dart     # æ–°å¢ï¼šåˆ†ç±»ä»“åº“
â”‚   â”‚   â””â”€â”€ backup_repository.dart       # æ–°å¢ï¼šå¤‡ä»½ä»“åº“
â”‚   â””â”€â”€ services/
â”‚       â”œâ”€â”€ export_service.dart          # æ–°å¢ï¼šå¯¼å‡ºæœåŠ¡
â”‚       â”œâ”€â”€ import_service.dart          # æ–°å¢ï¼šå¯¼å…¥æœåŠ¡
â”‚       â””â”€â”€ backup_service.dart          # æ–°å¢ï¼šå¤‡ä»½æœåŠ¡
â”œâ”€â”€ modules/
â”‚   â”œâ”€â”€ calendar/
â”‚   â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”‚   â”œâ”€â”€ search_view.dart         # æ–°å¢ï¼šæœç´¢é¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ category_filter_view.dart # æ–°å¢ï¼šåˆ†ç±»ç­›é€‰
â”‚   â”‚   â””â”€â”€ controllers/
â”‚   â”‚       â””â”€â”€ search_controller.dart   # æ–°å¢ï¼šæœç´¢æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ category/                        # æ–°å¢ï¼šåˆ†ç±»æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”‚   â”œâ”€â”€ category_list_view.dart
â”‚   â”‚   â”‚   â””â”€â”€ category_edit_view.dart
â”‚   â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”‚   â””â”€â”€ category_controller.dart
â”‚   â”‚   â””â”€â”€ bindings/
â”‚   â”‚       â””â”€â”€ category_binding.dart
â”‚   â””â”€â”€ settings/
â”‚       â”œâ”€â”€ views/
â”‚       â”‚   â”œâ”€â”€ backup_management_view.dart # æ–°å¢ï¼šå¤‡ä»½ç®¡ç†
â”‚       â”‚   â””â”€â”€ statistics_view.dart        # æ–°å¢ï¼šç»Ÿè®¡é¡µé¢
â”‚       â””â”€â”€ controllers/
â”‚           â””â”€â”€ backup_controller.dart      # æ–°å¢ï¼šå¤‡ä»½æ§åˆ¶å™¨
â””â”€â”€ routes/
    â””â”€â”€ app_pages.dart                   # æ›´æ–°ï¼šæ–°å¢è·¯ç”±
```

---

## ğŸ”§ æŠ€æœ¯å®ç°

### ä¾èµ–åŒ…

```yaml
dependencies:
  # ç°æœ‰ä¾èµ–...
  
  # æ–°å¢ä¾èµ–
  file_picker: ^8.0.0+1        # æ–‡ä»¶é€‰æ‹©å™¨
  path_provider: ^2.1.4        # è·¯å¾„è·å–
  csv: ^6.0.0                  # CSV è§£æ
  fl_chart: ^0.69.0            # å›¾è¡¨å±•ç¤º
```

### æ ¸å¿ƒç±»

#### ExportService
```dart
class ExportService {
  Future<String> exportToJson(List<Event> events, List<Intention> intentions);
  Future<String> exportToCsv(List<Event> events, List<Intention> intentions);
  Future<void> saveToFile(String content, String filename);
}
```

#### ImportService
```dart
class ImportService {
  Future<ImportResult> importFromJson(String filePath);
  Future<ImportResult> importFromCsv(String filePath);
  Future<void> validateData(dynamic data);
  Future<void> mergeData(ImportResult result);
}
```

#### BackupService
```dart
class BackupService {
  Future<void> createBackup();
  Future<List<BackupInfo>> listBackups();
  Future<void> restoreBackup(String backupId);
  Future<void> deleteBackup(String backupId);
  Future<void> scheduleAutoBackup();
}
```

---

## ğŸ¨ UI/UX è®¾è®¡

### è®¾è®¡åŸåˆ™

1. **ä¸€è‡´æ€§**ï¼šä¸ç°æœ‰ Soft UI é£æ ¼ä¿æŒä¸€è‡´
2. **æ¸…æ™°æ€§**ï¼šå¯¼å…¥å¯¼å‡ºæµç¨‹æ¸…æ™°æ˜äº†
3. **åé¦ˆæ€§**ï¼šæ“ä½œè¿›åº¦å’Œç»“æœåŠæ—¶åé¦ˆ
4. **å®‰å…¨æ€§**ï¼šé‡è¦æ“ä½œéœ€è¦ç¡®è®¤

### é¢œè‰²æ–¹æ¡ˆ

- å¯¼å‡ºæŒ‰é’®ï¼šå¥åº·ç»¿ (#10B981)
- å¯¼å…¥æŒ‰é’®ï¼šè–°è¡£è‰ç´« (#8B5CF6)
- å¤‡ä»½æŒ‰é’®ï¼šè“è‰² (#3B82F6)
- åˆ é™¤æŒ‰é’®ï¼šçº¢è‰² (#EF4444)

---

## âœ… éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½æµ‹è¯•

- [ ] JSON å¯¼å‡ºåŒ…å«æ‰€æœ‰æ•°æ®
- [ ] CSV å¯¼å‡ºæ ¼å¼æ­£ç¡®
- [ ] JSON å¯¼å…¥æˆåŠŸæ¢å¤æ•°æ®
- [ ] CSV å¯¼å…¥æˆåŠŸæ¢å¤æ•°æ®
- [ ] æœç´¢åŠŸèƒ½è¿”å›æ­£ç¡®ç»“æœ
- [ ] åˆ†ç±»ç­›é€‰æ­£ç¡®æ˜¾ç¤ºäº‹ä»¶
- [ ] è‡ªå®šä¹‰åˆ†ç±»åˆ›å»ºæˆåŠŸ
- [ ] è‡ªåŠ¨å¤‡ä»½æŒ‰è®¡åˆ’æ‰§è¡Œ
- [ ] æ‰‹åŠ¨å¤‡ä»½ç«‹å³ç”Ÿæˆ
- [ ] å¤‡ä»½æ¢å¤æ•°æ®å®Œæ•´

### æ€§èƒ½æµ‹è¯•

- [ ] å¯¼å‡º 1000+ äº‹ä»¶ < 2 ç§’
- [ ] å¯¼å…¥ 1000+ äº‹ä»¶ < 3 ç§’
- [ ] æœç´¢å“åº” < 500ms
- [ ] åˆ†ç±»ç­›é€‰å“åº” < 300ms

### å…¼å®¹æ€§æµ‹è¯•

- [ ] Windows å¹³å°æ­£å¸¸è¿è¡Œ
- [ ] Android å¹³å°æ­£å¸¸è¿è¡Œ
- [ ] iOS å¹³å°æ­£å¸¸è¿è¡Œ
- [ ] ä¸åŒå±å¹•å°ºå¯¸é€‚é…

---

## ğŸ“Š å·¥ä½œé‡ä¼°ç®—

| ä»»åŠ¡ | é¢„è®¡æ—¶é—´ | ä¼˜å…ˆçº§ |
|------|----------|--------|
| æ•°æ®å¯¼å…¥å¯¼å‡º | 3-4 å¤© | P0 |
| äº‹ä»¶æœç´¢ | 2-3 å¤© | P1 |
| åˆ†ç±»ç³»ç»Ÿ | 4-5 å¤© | P1 |
| æ•°æ®å¤‡ä»½ | 3-4 å¤© | P1 |
| UI å®ç° | 3-4 å¤© | P0 |
| æµ‹è¯•å’Œä¼˜åŒ– | 2-3 å¤© | P0 |
| **æ€»è®¡** | **17-23 å¤©** | |

---

## ğŸš€ å®æ–½æ­¥éª¤

### Week 1
1. å®ç°æ•°æ®æ¨¡å‹ï¼ˆCategory, BackupInfoï¼‰
2. å®ç°å¯¼å‡ºæœåŠ¡ï¼ˆJSON/CSVï¼‰
3. å®ç°å¯¼å…¥æœåŠ¡ï¼ˆJSON/CSVï¼‰
4. æ·»åŠ æ–‡ä»¶é€‰æ‹©å™¨é›†æˆ

### Week 2
5. å®ç°æœç´¢åŠŸèƒ½å’Œ UI
6. å®ç°åˆ†ç±»ç³»ç»Ÿï¼ˆæ¨¡å‹ã€ä»“åº“ã€UIï¼‰
7. å®ç°åˆ†ç±»ç­›é€‰åŠŸèƒ½
8. æ·»åŠ åˆ†ç±»ç»Ÿè®¡é¡µé¢

### Week 3
9. å®ç°å¤‡ä»½æœåŠ¡
10. å®ç°è‡ªåŠ¨å¤‡ä»½è°ƒåº¦
11. å®ç°å¤‡ä»½ç®¡ç† UI
12. å®Œæ•´æµ‹è¯•å’Œ bug ä¿®å¤
13. æ–‡æ¡£æ›´æ–°å’Œå‘å¸ƒ

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **æ•°æ®å®‰å…¨**ï¼šå¯¼å…¥å‰å¤‡ä»½ç°æœ‰æ•°æ®
2. **é”™è¯¯å¤„ç†**ï¼šå®Œå–„çš„é”™è¯¯æç¤ºå’Œæ¢å¤æœºåˆ¶
3. **æ€§èƒ½ä¼˜åŒ–**ï¼šå¤§æ•°æ®é‡æ—¶ä½¿ç”¨æµå¼å¤„ç†
4. **ç”¨æˆ·ä½“éªŒ**ï¼šæ“ä½œæµç¨‹ç®€å•ç›´è§‚
5. **å‘åå…¼å®¹**ï¼šä¿æŒä¸ v1.0 æ•°æ®æ ¼å¼å…¼å®¹

---

## ğŸ‰ å®Œæˆæ ‡å¿—

- æ‰€æœ‰åŠŸèƒ½é€šè¿‡éªŒæ”¶æµ‹è¯•
- ä»£ç é€šè¿‡ Flutter analyze
- æ–‡æ¡£å®Œæ•´æ›´æ–°
- å‘å¸ƒ v1.1 ç‰ˆæœ¬
- åˆ›å»º Phase 6 å®ŒæˆæŠ¥å‘Š
